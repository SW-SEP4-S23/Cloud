// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Datapoint {
  timestamp   DateTime @id
  co2         Float
  humidity    Float
  temperature Float
}

model Thresholds {
  dataType          DataType           @id
  minVal            Float
  maxVal            Float
  thresholdRequests ThresholdRequest[]
}

model ThresholdRequest {
  id          Float
  //I think this is neccesary?
  dataTypeFK  Thresholds @relation(fields: [dataType], references: [dataType])
  dataType    DataType
  minValReq   Float
  maxValReq   Float
  requestDate DateTime
  ack_idFK    Acks       @relation(fields: [ack_id], references: [id])
  ack_id      Float

  @@id([id, dataType])
}

model Acks {
  id               Float              @id
  dateRecieved     DateTime
  acked            Boolean
  ThresholdRequest ThresholdRequest[]
}

enum DataType {
  TEMPERATURE
  CO2
  HUMIDITY
}
