// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Datapoint {
  timestamp DateTime
  type      DataType
  value     Float

  @@id([timestamp, type])
}

model Thresholds {
  dataType          DataType           @id
  minVal            Float?
  maxVal            Float?
  thresholdRequests ThresholdRequest[]
}

model ThresholdRequest {
  id          Int        @default(autoincrement())
  //I think this is neccesary?
  dataTypeFK  Thresholds @relation(fields: [dataType], references: [dataType])
  dataType    DataType
  minValReq   Float
  maxValReq   Float
  requestDate DateTime
  ack_idFK    Acks?      @relation(fields: [ack_id], references: [id])
  ack_id      Int?

  @@id([id, dataType])
}

model Acks {
  id               Int                @id @default(autoincrement())
  dateRecieved     DateTime
  acked            Boolean
  ThresholdRequest ThresholdRequest[]
}

enum DataType {
  TEMPERATURE
  CO2
  HUMIDITY
}
