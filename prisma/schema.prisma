// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Datapoint {
  timestamp DateTime
  type      DataType
  value     Float

  @@id([timestamp, type])
}

model Thresholds {
  dataType          DataType            @id
  minValue          Float?
  maxValue          Float?
  thresholdRequests ThresholdRequests[]
}

model ThresholdRequests {
  id          Int        @default(autoincrement())
  //I think this is neccesary?
  thresholds  Thresholds @relation(fields: [dataType], references: [dataType])
  dataType    DataType
  minValueReq Float
  maxValueReq Float
  requestDate DateTime
  ack         Ack?       @relation(fields: [ackId], references: [id])
  ackId       Int?

  @@id([id, dataType])
}

model Ack {
  id                Int                 @id @default(autoincrement())
  dateRecieved      DateTime?
  acked             Boolean
  thresholdRequests ThresholdRequests[]
}

enum DataType {
  TEMPERATURE
  CO2
  HUMIDITY
}
